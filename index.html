<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link rel="stylesheet" href="output.css">
    <style>
        .titlebar {
            -webkit-user-select: none;
            -webkit-app-region: drag;
        }
    </style>
    <script src="Chart.bundle.js"></script>
</head>

<body class="relative flex flex-col h-screen bg-baseLigth" onload="InitializeWallet()">
    <!-- Canvas used to display the bar-->
    <div class="absolute z-0">
        <canvas id="myChart" height="600" width="800"></canvas>
    </div>
    <!-- End of the canvas-->

    <!-- The title bar-->
    <div class="flex flex-row justify-between titlebar pr-4 py-2 my-2 z-50 ">
        <div class="pl-8 w-24 text-secondaryLigth">
            <svg class=" object-fill fill-current" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" id="svg" viewBox="0, 0, 400,92.9530201342282">
                <g id="svgg">
                    <path id="path0"
                        d="M41.682 0.345 C 21.902 2.363,6.000 16.254,1.358 35.570 C 0.214 40.327,-0.054 46.604,0.061 65.940 L 0.168 84.060 1.035 85.908 C 4.702 93.725,15.433 93.725,19.100 85.908 L 19.966 84.060 20.156 62.248 C 20.298 45.780,20.451 40.107,20.778 39.094 C 27.907 17.011,55.947 12.942,68.189 32.215 C 71.922 38.091,72.122 39.680,72.136 63.662 C 72.147 82.721,72.175 83.605,72.821 85.333 C 76.036 93.925,88.058 93.925,91.272 85.333 C 92.063 83.219,92.319 45.937,91.581 40.238 C 88.405 15.694,66.092 -2.145,41.682 0.345 M110.722 1.445 C 104.508 3.196,102.462 8.015,103.855 17.617 C 106.500 35.853,120.020 50.873,137.836 55.371 L 139.262 55.731 139.270 69.728 C 139.279 84.958,139.364 85.837,141.091 88.454 C 144.637 93.828,152.346 94.309,156.645 89.425 C 159.049 86.695,159.060 86.602,159.060 70.276 L 159.060 55.772 160.822 55.356 C 179.940 50.844,194.683 32.322,195.032 12.378 C 195.285 -2.079,176.355 -3.010,175.329 11.409 C 174.426 24.104,166.862 33.565,155.442 36.285 C 139.372 40.113,124.529 28.953,123.210 12.052 C 122.591 4.117,117.272 -0.401,110.722 1.445 M214.340 1.368 C 205.150 3.559,203.759 15.836,212.245 19.851 L 214.262 20.805 239.427 20.805 L 264.592 20.805 236.356 49.077 C 220.827 64.627,207.892 77.808,207.612 78.369 C 205.027 83.548,207.643 90.279,213.024 92.292 C 214.806 92.959,215.421 92.968,252.803 92.877 L 290.772 92.785 292.671 91.852 C 298.793 88.846,300.195 80.888,295.449 76.075 C 292.438 73.021,293.814 73.154,265.348 73.154 L 240.453 73.154 268.675 44.883 C 295.534 17.977,296.932 16.517,297.610 14.669 C 299.441 9.677,297.372 4.416,292.671 2.107 L 290.772 1.174 253.188 1.121 C 231.935 1.090,215.055 1.198,214.340 1.368 M349.664 1.349 C 311.701 4.995,294.441 50.788,320.609 78.441 C 344.419 103.602,386.522 94.212,397.483 61.295 C 407.856 30.143,382.382 -1.792,349.664 1.349 M361.242 21.978 C 382.271 28.069,386.666 56.206,368.524 68.601 C 353.155 79.103,331.600 70.032,328.326 51.685 C 324.914 32.563,342.619 16.584,361.242 21.978 " />
                </g>
            </svg>
        </div>
        <div class="flex flex-grow justify-end items-center ">
            <div class="relative flex justify-center items-center rounded-full h-4 w-4  bg-tdBlue mr-2 text-black">
                <svg class=" object-fill fill-current" width="12" height="24" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24">
                    <path
                        d="M8.465 16.95l2.828 3.05h-7.293v-7.293l3.051 2.829 8.484-8.486-2.828-3.05h7.293v7.292l-3.051-2.828z" />
                </svg>
                <div class="absolute hover:hidden rounded-full h-4 w-4  bg-tdBlue  mr-2">

                </div>
            </div>
            <div class="relative flex justify-center items-center rounded-full h-4 w-4 bg-tdGreen mr-2 text-black">
                <a class=" object-fill fill-current">
                    -
                </a>
                <div class="absolute hover:hidden rounded-full h-4 w-4  bg-tdGreen  mr-2">

                </div>
            </div>
            <div class="relative flex justify-center items-center rounded-full h-4 w-4  bg-tdRed mr-2 text-black">
                <svg class=" object-fill fill-current" width="7" height="24" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24">
                    <path
                        d="M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z" />
                </svg>

                <div class="absolute hover:hidden rounded-full h-4 w-4  bg-tdRed  mr-2">

                </div>
            </div>
        </div>
        </a>
    </div>
    <!-- Here lies the titlebar-->
    <!-- This is the main window-->
    <div class="flex flex-row h-full z-10 ">
        <!-- Starts Side Menu-->
        <div class="w-2/12 h-full pt-8 pb-12 px-8 text-white">
            <div class="flex flex-col justify-between items-center rounded-full bg-secondaryLigth h-full shadow-inner py-10
            ">
                <a href="" class="flex justify-center items-center w-16 h-16 rounded-full shadow-inner">
                    <svg class=" object-fill fill-current" width="30" height="24" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0, 0, 100,92.9530201342282">
                        <path id="path0"
                            d="M41.682 0.345 C 21.902 2.363,6.000 16.254,1.358 35.570 C 0.214 40.327,-0.054 46.604,0.061 65.940 L 0.168 84.060 1.035 85.908 C 4.702 93.725,15.433 93.725,19.100 85.908 L 19.966 84.060 20.156 62.248 C 20.298 45.780,20.451 40.107,20.778 39.094 C 27.907 17.011,55.947 12.942,68.189 32.215 C 71.922 38.091,72.122 39.680,72.136 63.662 C 72.147 82.721,72.175 83.605,72.821 85.333 C 76.036 93.925,88.058 93.925,91.272 85.333 C 92.063 83.219,92.319 45.937,91.581 40.238 C 88.405 15.694,66.092 -2.145,41.682 0.345  "
                            stroke="none" />
                    </svg>
                </a>
                <a href="" class="flex justify-center items-center w-16 h-16 rounded-full">
                    <svg class=" object-fill fill-current" width="30" height="24" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0, 0, 24,24">
                        <path
                            d="M24 0l-6 22-8.129-7.239 7.802-8.234-10.458 7.227-7.215-1.754 24-12zm-15 16.668v7.332l3.258-4.431-3.258-2.901z" />
                    </svg>
                </a>
                <a href="" class="flex justify-center items-center w-16 h-16 rounded-full">
                    <svg class=" object-fill fill-current" width="50" height="24" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0, 0, 24,24">
                        <path
                            d="M10.118 16.064c2.293-.529 4.428-.993 3.394-2.945-3.146-5.942-.834-9.119 2.488-9.119 3.388 0 5.644 3.299 2.488 9.119-1.065 1.964 1.149 2.427 3.394 2.945 1.986.459 2.118 1.43 2.118 3.111l-.003.825h-15.994c0-2.196-.176-3.407 2.115-3.936zm-10.116 3.936h6.001c-.028-6.542 2.995-3.697 2.995-8.901 0-2.009-1.311-3.099-2.998-3.099-2.492 0-4.226 2.383-1.866 6.839.775 1.464-.825 1.812-2.545 2.209-1.49.344-1.589 1.072-1.589 2.333l.002.619z" />
                    </svg>
                </a>
                <a href="" class="flex justify-center items-center w-16 h-16 rounded-full">
                    <svg class=" object-fill fill-current" width="30" height="24" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0, 0, 24,24">
                        <path
                            d="M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z" />
                    </svg>
                </a>
            </div>
        </div>
        <!-- The side menu has died-->

        <!-- Starts Home Window -->
        <div class="w-full py-10 pr-10">
            <div class="flex flex-col h-full w-1/2 ">
                <p class="text-3xl select-none">
                    Balance
                </p>

                <p class="text-6xl select-none">
                    <span id="Balance"></span> <span class="text-xl">âˆ©</span>
                </p>
            </div>
            <div class="w-1/2"></div>
        </div>
        <!-- What a shame, it was a good window -->
    </div>
    <!-- This WAS the main window dead-->


    <script>
        function InitializeWallet() {
            //Here we must load the balance
            var balance = "123.02";
            //Then we set the balance
            document.getElementById("Balance").innerHTML = balance;
            //We now load the address
        }
    </script>
    <!-- The script to display the graph-->
    <script>
        function formatDate(date) {
            var d = new Date(date),
                month = '' + (d.getMonth() + 1),
                day = '' + d.getDate(),
                year = d.getFullYear();

            if (month.length < 2)
                month = '0' + month;
            if (day.length < 2)
                day = '0' + day;

            return [year, month, day].join('-');
        }



        var ts = Math.round((new Date()).getTime() / 1000);
        var url = `https://api.coingecko.com/api/v3/coins/nyzo/market_chart/range?vs_currency=usd&from=${ts - 7884000 * 1.1}&to=${ts}`;
        prices = [];
        time = [];
        fetch(url)
            .then(function (response) {
                return response.json();
            })
            .then(function (jsonResponse) {

                for (var i = 0; i < jsonResponse['prices'].length; i++) {
                    time.push((formatDate(new Date(jsonResponse['prices'][i][0]))));
                    prices.push(Math.floor(jsonResponse['prices'][i][1] * 100) / 100);
                }
                var ctx = document.getElementById('myChart').getContext('2d');
                var gradientNyzo = ctx.createLinearGradient(0, 600, 0, 0);
                gradientNyzo.addColorStop(0, "rgba(255, 255, 255, 0)");
                gradientNyzo.addColorStop(1, "rgba(239, 124, 124, 0.4)");
                var data = {
                    labels: time,
                    datasets: [
                        {
                            label: "Price",
                            backgroundColor: gradientNyzo
                            ,
                            borderColor:
                                'rgba(255, 0, 0, 0.1)',

                            data: prices
                        },
                    ]
                };
                var myChart = new Chart(ctx, {
                    type: 'line',
                    data: data,
                    options: {
                        layout: {
                            padding: {
                                left: 0,
                                right: 0,
                                top: 50,
                                bottom: 0
                            }
                        },
                        scales: {
                            yAxes: [{
                                display: false,
                                ticks: {
                                    beginAtZero: true
                                }
                            }],
                            xAxes: [{
                                display: false,
                                ticks: {
                                }
                            }]
                        },
                        legend: {
                            display: false,
                            position: 'bottom',
                            labels: {
                                position: 'left',
                                boxWidth: 15
                            }
                        },
                        elements: {
                            point: {
                                radius: 0,
                                hitRadius: 2


                            }
                        },
                        animation: {
                            duration: 1500,
                            easing: 'easeInOutQuart'
                        }
                    }
                });
            });






    </script>
    <!-- The script to display the graph-->

    <!-- The functions to communicate with Python-->
    <script>
        const { ipcRenderer } = require('electron');
        ipcRenderer.on('MESSAGE_FROM_BACKGROUND_VIA_MAIN', (event, args) => {
            console.log(args);
        });
        // trigger event to start background process
        // can be triggered pretty much from anywhere after
        // you have set up a listener to get the information
        // back from background process, as I have done in line 13
        ipcRenderer.send('START_BACKGROUND_VIA_MAIN', {
            number: 25,
        });
    </script>
    <!-- The functions to communicate with Python-->
</body>

</html>